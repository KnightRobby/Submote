$(document).ready(function(){function t(t,i){for(var s,n,o=t.html(),a=o.split(" "),l=0;l<=a.length;l++)n=a[l],void 0!==i[n]&&n[0]===n[0].toLowerCase()&&(s=new RegExp("\\b"+n+'\\b(?=[^"]*(?:"[^"]*"[^"]*)*$)',"g"),o=o.replace(s,e(n,i[n])));t.html(o)}function e(t,e){return'<img class="emoticon ttv-emo-'+e+'" src="http://static-cdn.jtvnw.net/emoticons/v1/'+e+'/1.0" srcset="http://static-cdn.jtvnw.net/emoticons/v1/'+e+'/2.0 2x" data-id="'+e+'" data-regex="'+t+'" original-title="">'}var i={};if(null===localStorage.getItem("emotes")){$.getJSON("https://twitchemotes.com/api_cache/v2/subscriber.json",function(t){$.each(t.channels,function(t,e){$.each(e.emotes,function(t,e){i[e.code]=e.image_id})})}).done(function(){localStorage.setItem("emotes",JSON.stringify(i))}).fail(function(){$("body").append('<ul id="noty_bottomCenter_layout_container" class="i-am-new" style="bottom: 20px; position: fixed; width: 320px; height: auto; margin: 0px; padding: 0px; list-style-type: none; z-index: 10000; left: 800px;"><li class="noty_bar alert" style="width: 320px;"><div class="noty_bar noty_type_alert" id="noty_152298130185963840"><div class="noty_message"><div class="text-container"><div class="glitch"></div><div class="noty_text"><p>Could not load subscriber emotes :/<br><a href="javascript:history.go(0);">Please refresh</a></p></div></div><div class="noty_close"></div></div></div></li></ul>')})}else i=JSON.parse(localStorage.getItem("emotes"));$(".chat-lines").on("DOMNodeInserted",function(e){if($(e.target).is(".chat-line")){var s=$(this).find(".message").last(),n=($(this).find(".badges").last(),$(this).find(".from").last().html());"jtv"!==n&&t(s,i)}})});