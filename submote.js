//Submote by Zarlach
$(document).ready(function()
{
	//Global vars
	var subMotes 	= {};			// subMotes[emote] = source
	var subEmotes 	= {};			// subEmotes[emote] = id
	var bttvEmotes 	= {};			// bttvEmotes[emote] = source


	//Check if emotes are already stored locally
	if (localStorage.getItem("subEmotes") === null)
		loadSubEmotes();
	else
	{
		subEmotes 			= JSON.parse(localStorage.getItem("subEmotes"));
		var genDate 		= Date.parse(subEmotes['generated_at']);
		var currentDate 	= new Date();
		var expirationDate 	= genDate+3600*1000/2;	//30 minutes

		//Check if expired
		if(currentDate.getTime() >= expirationDate)
		{
			loadSubEmotes();
		}
	}

	if (localStorage.getItem("bttvEmotes") === null) loadBetterTTVemotes();
	else bttvEmotes = JSON.parse(localStorage.getItem("bttvEmotes"));


	/**
	 * Check for new chat messages
	 */
	$('.chat-lines').on('DOMNodeInserted', function(e)
	{
		var element = e.target;
		var line 	= $(element).last();

		//Check if it's a message
		if (line.last().length
			&& line.find('.message').last().html() !== undefined
			&& line.not('.admin'))
		{
			var message = line.find('.message').last();
			var badges	= line.find('.badges');
			var from	= line.find('.from').html().toLowerCase();
			

			//Parse message
			if(from !== 'jtv')
			{
				parseMessage(message, subEmotes);
				parseMessage(message, bttvEmotes);
			}

			//Append turbo
			if(from === 'zarlach' && badges.last().find('.submote-dev').length === 0)
			{
				$(badges).last().append('<div class="badge float-left tooltip submote-dev" original-title="Submote Dev"></div>');
				$(badges).last().find('.submote-dev').css({
					'width': '18px',
					'height': '18px',
					'background-repat': 'no-repeat',
					'background': 'url(data:image/png;base64,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/GMzLdsAADtIaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjUtYzAyMSA3OS4xNTU3NzIsIDIwMTQvMDEvMTMtMTk6NDQ6MDAgICAgICAgICI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgICAgICAgICAgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iCiAgICAgICAgICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICAgICAgICAgIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIKICAgICAgICAgICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgICAgICAgICAgeG1sbnM6ZXhpZj0iaHR0cDovL25zLmFkb2JlLmNvbS9leGlmLzEuMC8iPgogICAgICAgICA8eG1wOkNyZWF0b3JUb29sPkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE0IChXaW5kb3dzKTwveG1wOkNyZWF0b3JUb29sPgogICAgICAgICA8eG1wOkNyZWF0ZURhdGU+MjAxNS0wNi0xMVQwNToyNDo1NCswMjowMDwveG1wOkNyZWF0ZURhdGU+CiAgICAgICAgIDx4bXA6TWV0YWRhdGFEYXRlPjIwMTUtMDYtMTFUMDU6MjQ6NTQrMDI6MDA8L3htcDpNZXRhZGF0YURhdGU+CiAgICAgICAgIDx4bXA6TW9kaWZ5RGF0ZT4yMDE1LTA2LTExVDA1OjI0OjU0KzAyOjAwPC94bXA6TW9kaWZ5RGF0ZT4KICAgICAgICAgPHhtcE1NOkluc3RhbmNlSUQ+eG1wLmlpZDo0NGUxODdmYi0zMjA2LWQwNDAtYWFlNC00ZGY5ZmQ0ZDE0N2I8L3htcE1NOkluc3RhbmNlSUQ+CiAgICAgICAgIDx4bXBNTTpEb2N1bWVudElEPmFkb2JlOmRvY2lkOnBob3Rvc2hvcDo2YWIwZDlmMC0wZmU5LTExZTUtYTA1OC1iZGNiN2FhZTNhZGU8L3htcE1NOkRvY3VtZW50SUQ+CiAgICAgICAgIDx4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ+eG1wLmRpZDplNzE1MjMwNC04ZWY4LTlhNDctYmI2YS03OWU1MzRhMWNmMTQ8L3htcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD4KICAgICAgICAgPHhtcE1NOkhpc3Rvcnk+CiAgICAgICAgICAgIDxyZGY6U2VxPgogICAgICAgICAgICAgICA8cmRmOmxpIHJkZjpwYXJzZVR5cGU9IlJlc291cmNlIj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmFjdGlvbj5jcmVhdGVkPC9zdEV2dDphY3Rpb24+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDppbnN0YW5jZUlEPnhtcC5paWQ6ZTcxNTIzMDQtOGVmOC05YTQ3LWJiNmEtNzllNTM0YTFjZjE0PC9zdEV2dDppbnN0YW5jZUlEPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6d2hlbj4yMDE1LTA2LTExVDA1OjI0OjU0KzAyOjAwPC9zdEV2dDp3aGVuPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6c29mdHdhcmVBZ2VudD5BZG9iZSBQaG90b3Nob3AgQ0MgMjAxNCAoV2luZG93cyk8L3N0RXZ0OnNvZnR3YXJlQWdlbnQ+CiAgICAgICAgICAgICAgIDwvcmRmOmxpPgogICAgICAgICAgICAgICA8cmRmOmxpIHJkZjpwYXJzZVR5cGU9IlJlc291cmNlIj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmFjdGlvbj5zYXZlZDwvc3RFdnQ6YWN0aW9uPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6aW5zdGFuY2VJRD54bXAuaWlkOjQ0ZTE4N2ZiLTMyMDYtZDA0MC1hYWU0LTRkZjlmZDRkMTQ3Yjwvc3RFdnQ6aW5zdGFuY2VJRD4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OndoZW4+MjAxNS0wNi0xMVQwNToyNDo1NCswMjowMDwvc3RFdnQ6d2hlbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OnNvZnR3YXJlQWdlbnQ+QWRvYmUgUGhvdG9zaG9wIENDIDIwMTQgKFdpbmRvd3MpPC9zdEV2dDpzb2Z0d2FyZUFnZW50PgogICAgICAgICAgICAgICAgICA8c3RFdnQ6Y2hhbmdlZD4vPC9zdEV2dDpjaGFuZ2VkPgogICAgICAgICAgICAgICA8L3JkZjpsaT4KICAgICAgICAgICAgPC9yZGY6U2VxPgogICAgICAgICA8L3htcE1NOkhpc3Rvcnk+CiAgICAgICAgIDxwaG90b3Nob3A6RG9jdW1lbnRBbmNlc3RvcnM+CiAgICAgICAgICAgIDxyZGY6QmFnPgogICAgICAgICAgICAgICA8cmRmOmxpPjlGRTg3QkFBMDE5QTkzQUY5ODVFMDM3Q0QzMERDQUMzPC9yZGY6bGk+CiAgICAgICAgICAgICAgIDxyZGY6bGk+YWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOmY1NDcxNWM0LTBmZTgtMTFlNS1hMDU4LWJkY2I3YWFlM2FkZTwvcmRmOmxpPgogICAgICAgICAgICA8L3JkZjpCYWc+CiAgICAgICAgIDwvcGhvdG9zaG9wOkRvY3VtZW50QW5jZXN0b3JzPgogICAgICAgICA8cGhvdG9zaG9wOkNvbG9yTW9kZT4zPC9waG90b3Nob3A6Q29sb3JNb2RlPgogICAgICAgICA8cGhvdG9zaG9wOklDQ1Byb2ZpbGU+c1JHQiBJRUM2MTk2Ni0yLjE8L3Bob3Rvc2hvcDpJQ0NQcm9maWxlPgogICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3BuZzwvZGM6Zm9ybWF0PgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICAgICA8dGlmZjpYUmVzb2x1dGlvbj43MjAwMDAvMTAwMDA8L3RpZmY6WFJlc29sdXRpb24+CiAgICAgICAgIDx0aWZmOllSZXNvbHV0aW9uPjcyMDAwMC8xMDAwMDwvdGlmZjpZUmVzb2x1dGlvbj4KICAgICAgICAgPHRpZmY6UmVzb2x1dGlvblVuaXQ+MjwvdGlmZjpSZXNvbHV0aW9uVW5pdD4KICAgICAgICAgPGV4aWY6Q29sb3JTcGFjZT4xPC9leGlmOkNvbG9yU3BhY2U+CiAgICAgICAgIDxleGlmOlBpeGVsWERpbWVuc2lvbj40ODwvZXhpZjpQaXhlbFhEaW1lbnNpb24+CiAgICAgICAgIDxleGlmOlBpeGVsWURpbWVuc2lvbj40ODwvZXhpZjpQaXhlbFlEaW1lbnNpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAo8P3hwYWNrZXQgZW5kPSJ3Ij8+8AONnAAAACBjSFJNAAB6JQAAgIMAAPn/AACA6QAAdTAAAOpgAAA6mAAAF2+SX8VGAAAkQElEQVR4AQAwJM/bAWRBpQAAAABAAQEAfQAAADUAAAAAAAACAAEB/gD9APUAAQAKAAMBBAD+AAEABwT7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)',
					'background-size': '18px 18px'
				});
			}
		}
	});


	/**
	 * Load subscriber emotes from web
	 */
	function loadSubEmotes()
	{
		$.getJSON('https:twitchemotes.com/api_cache/v2/subscriber.json', function(data)
		{
			$.each(data['channels'], function(channel, properties)
			{
				$.each(properties['emotes'], function(list, emote){
					subEmotes[emote['code']] = emote['image_id'];
				});
			});

			$.each(data['meta'], function(key, val){
				subEmotes[key] = val;
			});
		})
		.done(function()
		{
			subEmotes['provider'] = 'twitch';
			localStorage.setItem("subEmotes", JSON.stringify(subEmotes));
		})
		.fail(function()
		{
			sendError('Submote could not load sub emotes');
		});
	}


	/**
	 * Load BetterTTV emotes from web
	 */
	function loadBetterTTVemotes()
	{
		$.getJSON('https://cdn.betterttv.net/emotes/emotes.json', function(data){
			$.each(data, function(key, value){
				bttvEmotes[value['regex'].replace('\\', '')] = value['url'].replace('//', 'https://');
			});
		})
		.done(function(){
			bttvEmotes['provider'] = 'betterttv';
			localStorage.setItem("bttvEmotes", JSON.stringify(bttvEmotes));
		})
		.fail(function(){
			//sendError('Submote could not load BetterTTV emotes');
		});
	}


	/**
	 * Scan message and replace words with emotes!
	 * 
	 * @param  {element} ele 		Message element
	 * @param  {object} list 		List of emotes
	 * @param  {string} provider	Emote provider
	 */
	function parseMessage(ele, list)
	{
		var msg 		= ele.html();
		var split 		= msg.replace(/(<([^>]+)>)/ig,'').trim().split(' ');
			split		= $.grep(split,function(n){ return(n) });
		var words		= [];
		var provider  	= list['provider'];
		var regex;
		var word;

		//Remove duplicates
		$.each(split, function(i, el){
			if($.inArray(el, words) === -1) words.push(el);
		});

		//
		for (var i = 0; i <= words.length; i++) {
			word = words[i];

			if(validateFilter(word, list, provider))
			{
				regex = new RegExp('\\b'+word+'\\b(?=[^"]*(?:"[^"]*"[^"]*)*$)', 'g');
				msg = msg.replace(regex, generateEmoteImage(word, list[word], provider));
			}
		}

		ele.html(msg.trim());
	}


	/**
	 * Generate emote image HTML tag.
	 * 
	 * @param  {int} id Emote ID
	 * @return {string}    HTML img tag
	 */
	function generateEmoteImage(emote, source, provider)
	{
		switch(provider){
			case 'twitch':
				return '<img class="emoticon ttv-emo-'+source+'" src="http://static-cdn.jtvnw.net/emoticons/v1/'+source+'/1.0" srcset="http://static-cdn.jtvnw.net/emoticons/v1/'+source+'/2.0 2x" data-id="'+source+'" data-regex="'+emote+'" alt="'+emote+'" original-title>';
				break;
			case 'betterttv':
				return '<img class="emoticon tooltip" src="'+source+'" data-regex="'+emote+'" original-title="'+emote+'">';
				break;
		}
	}


	/**
	 * Run selected word through a filter
	 * 
	 * @param  {string} 	word     Selected word
	 * @param  {object} 	list 	 Emote list
	 * @param  {string} 	provider Emote provider
	 * @return {boolean}    Returns whether or not the word passed the filter
	 */
	function validateFilter(word, list, provider)
	{
		var regex = new RegExp('^(?=.*[a-z])(?=.*[A-Z]).+$');

		//General filter
		if(list[word] === undefined
			|| !regex.test(word)
			|| word === 'provider'
			|| word === 'generated_at'
			|| word.length === 0)
			return false;

		//Provider specific filter
		switch(provider){
			case 'twitch':
				if (word[0] !== word[0].toLowerCase()
					|| word === 'double'
					|| word === 'triple'
					|| word === 'quadra'
					|| word === 'penta'
					|| word === 'kill'
					|| word === 'snap')
					return false;

				break;
			case 'betterttv':

				break;
		}

		return true;
	}

	/**
	 * In case something fails, let the user know!
	 * 
	 * @param  {string} message Error description
	 */
	function sendError(message)
	{
		$('body').append('<ul id="noty_bottomCenter_layout_container" class="i-am-new" style="bottom: 20px; position: fixed; width: 320px; height: auto; margin: 0px; padding: 0px; list-style-type: none; z-index: 10000; left: 800px;"><li class="noty_bar alert" style="width: 320px;"><div class="noty_bar noty_type_alert" id="noty_152298130185963840"><div class="noty_message"><div class="text-container"><div class="glitch"></div><div class="noty_text"><p>'+message+'<br><a href="javascript:history.go(0);">Please refresh</a></p></div></div><div class="noty_close"></div></div></div></li></ul>');
	}
});